<!-- Navigation Bar -->
<nav
  class="navbar"
  [class.dark-theme]="isDarkTheme"
  [class.scrolled]="isScrolled"
>
  <div class="logo">
    <i class="fas fa-briefcase"></i>
    Portfolio
  </div>
  <!-- Desktop Navigation -->
  <ul class="nav-links desktop-nav">
    <li><a href="#home" (click)="scrollToSection('home', $event)">Home</a></li>
    <li>
      <a href="#experience" (click)="scrollToSection('experience', $event)"
        >Experience</a
      >
    </li>
    <li>
      <a href="#projects" (click)="scrollToSection('projects', $event)"
        >Projects</a
      >
    </li>
    <li>
      <a
        href="#certifications"
        (click)="scrollToSection('certifications', $event)"
        >Certifications</a
      >
    </li>
    <li>
      <a href="#educations" (click)="scrollToSection('educations', $event)"
        >Educations</a
      >
    </li>
    <li>
      <a href="#awards" (click)="scrollToSection('awards', $event)">Awards</a>
    </li>
  </ul>

  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" (click)="toggleMobileMenu()">
    <i class="fas fa-bars" *ngIf="!isMobileMenuOpen"></i>
    <i class="fas fa-times" *ngIf="isMobileMenuOpen"></i>
  </button>

  <div class="nav-actions">
    <div class="social-buttons">
      <a
        href="https://linkedin.com/in/yugantar-badhan"
        target="_blank"
        class="social-btn linkedin"
        title="LinkedIn"
      >
        <i class="fab fa-linkedin-in"></i>
      </a>
      <a
        href="https://instagram.com"
        target="_blank"
        class="social-btn instagram"
        title="Instagram"
      >
        <i class="fab fa-instagram"></i>
      </a>
      <a
        href="https://facebook.com"
        target="_blank"
        class="social-btn facebook"
        title="Facebook"
      >
        <i class="fab fa-facebook-f"></i>
      </a>
      <a
        href="https://wa.me/918796134779"
        target="_blank"
        class="social-btn whatsapp"
        title="WhatsApp"
      >
        <i class="fab fa-whatsapp"></i>
      </a>
    </div>

    <!-- Admin Dropdown -->
    <div class="admin-dropdown-container">
      <button
        class="admin-toggle"
        (click)="toggleAdminDropdown($event)"
        [class.active]="showAdminDropdown()"
        title="Admin Panel"
      >
        <img src="assets/images/admin.png" alt="Admin" class="admin-icon" />
      </button>

      <div
        class="admin-dropdown"
        [class.show]="showAdminDropdown()"
        [class.dark-theme]="isDarkTheme"
      >
        <div class="admin-dropdown-header">
          <span class="admin-status" *ngIf="isAdminAuthenticated()">
            <i class="fas fa-check-circle"></i> Authenticated
          </span>
          <span
            class="admin-status not-authenticated"
            *ngIf="!isAdminAuthenticated()"
          >
            <i class="fas fa-lock"></i> Not Authenticated
          </span>
        </div>

        <div class="admin-dropdown-content">
          <button
            *ngFor="let section of adminSections"
            class="admin-section-btn"
            [class.disabled]="!section.enabled"
            (click)="
              section.enabled ? selectAdminSection(section.id, $event) : null
            "
            [title]="
              section.enabled ? 'Manage ' + section.label : 'Coming Soon'
            "
          >
            <i
              class="fas"
              [class.fa-briefcase]="section.id === 'experience'"
              [class.fa-code]="section.id === 'projects'"
              [class.fa-certificate]="section.id === 'certifications'"
              [class.fa-graduation-cap]="section.id === 'educations'"
              [class.fa-trophy]="section.id === 'awards'"
            ></i>
            {{ section.label }}
            <span *ngIf="!section.enabled" class="coming-soon">Soon</span>
          </button>
        </div>

        <div class="admin-dropdown-footer" *ngIf="isAdminAuthenticated()">
          <button class="admin-logout-btn" (click)="logoutAdmin()">
            <i class="fas fa-sign-out-alt"></i> Logout
          </button>
        </div>
      </div>
    </div>

    <button
      class="theme-toggle"
      (click)="toggleTheme()"
      [title]="isDarkTheme ? 'Switch to Light Mode' : 'Switch to Dark Mode'"
    >
      <i
        class="fas"
        [class.fa-sun]="isDarkTheme"
        [class.fa-moon]="!isDarkTheme"
      ></i>
    </button>
  </div>
</nav>

<!-- Admin Token Modal - FIXED: No backdrop close -->
<div *ngIf="showAdminTokenModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>Admin Authentication</h3>
      <button class="close-btn" (click)="closeAdminTokenModal()">×</button>
    </div>

    <div class="admin-modal-content">
      <p>
        Enter admin token to manage <strong>{{ selectedAdminSection() }}</strong
        >:
      </p>
      <input
        type="password"
        class="admin-token-input"
        [(ngModel)]="adminToken"
        placeholder="Enter admin token"
        (keyup.enter)="submitAdminToken()"
        #tokenInput
      />
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeAdminTokenModal()">
        Cancel
      </button>
      <button
        class="btn-submit"
        (click)="submitAdminToken()"
        [disabled]="!adminToken.trim()"
      >
        Authenticate
      </button>
    </div>
  </div>
</div>

<!-- Admin Operations Modal - FIXED: No backdrop close -->
<div *ngIf="showAdminOperationsModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>{{ selectedAdminSection() | titlecase }} Management</h3>
      <button class="close-btn" (click)="closeAdminOperationsModal()">×</button>
    </div>

    <div class="admin-modal-content">
      <p>Choose an operation:</p>
      <div class="admin-operations-grid">
        <button
          *ngFor="let operation of adminOperations"
          class="admin-operation-btn"
          [class]="'operation-' + operation.id"
          (click)="selectOperation(operation.id)"
        >
          <i class="fas {{ operation.icon }}"></i>
          <span>{{ operation.label }}</span>
        </button>
      </div>
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeAdminOperationsModal()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Experience Selection Modal - FIXED: No backdrop close -->
<div *ngIf="showExperienceSelectionModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>Select Experience to {{ selectedOperation() | titlecase }}</h3>
      <button class="close-btn" (click)="closeExperienceSelectionModal()">
        ×
      </button>
    </div>

    <div class="admin-modal-content">
      <p *ngIf="experiences().length === 0">No experiences found.</p>
      <div *ngIf="experiences().length > 0" class="experience-selection-list">
        <button
          *ngFor="let exp of experiences()"
          class="experience-selection-item"
          [class.delete-mode]="selectedOperation() === 'delete'"
          (click)="selectExperience(exp.id)"
        >
          <div class="experience-info">
            <h4>{{ exp.companyName }}</h4>
            <p>{{ exp.role }}</p>
            <small
              >{{ exp.startDate | date : "MMM yyyy" }} -
              {{
                exp.current ? "Present" : (exp.endDate | date : "MMM yyyy")
              }}</small
            >
          </div>
          <i
            class="fas"
            [class.fa-edit]="selectedOperation() === 'update'"
            [class.fa-trash-alt]="selectedOperation() === 'delete'"
          ></i>
        </button>
      </div>
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeExperienceSelectionModal()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Project Selection Modal - FIXED: No backdrop close -->
<div *ngIf="showProjectSelectionModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>Select Project to {{ selectedOperation() | titlecase }}</h3>
      <button class="close-btn" (click)="closeProjectSelectionModal()">
        ×
      </button>
    </div>

    <div class="admin-modal-content">
      <p *ngIf="projects().length === 0">No projects found.</p>
      <div *ngIf="projects().length > 0" class="experience-selection-list">
        <button
          *ngFor="let project of projects()"
          class="experience-selection-item"
          [class.delete-mode]="selectedOperation() === 'delete'"
          (click)="selectProject(project.id)"
        >
          <div class="experience-info">
            <h4>{{ project.title }}</h4>
            <p>{{ project.techStack || "No tech stack specified" }}</p>
            <small>Project ID: {{ project.id }}</small>
          </div>
          <i
            class="fas"
            [class.fa-edit]="selectedOperation() === 'update'"
            [class.fa-trash-alt]="selectedOperation() === 'delete'"
          ></i>
        </button>
      </div>
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeProjectSelectionModal()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Mobile Navigation Menu -->
<div
  class="mobile-menu"
  [class.open]="isMobileMenuOpen"
  [class.dark-theme]="isDarkTheme"
>
  <ul class="mobile-nav-links">
    <li>
      <a
        href="#home"
        (click)="scrollToSection('home', $event); toggleMobileMenu()"
        >Home</a
      >
    </li>
    <li>
      <a
        href="#experience"
        (click)="scrollToSection('experience', $event); toggleMobileMenu()"
        >Experience</a
      >
    </li>
    <li>
      <a
        href="#projects"
        (click)="scrollToSection('projects', $event); toggleMobileMenu()"
        >Projects</a
      >
    </li>
    <li>
      <a
        href="#certifications"
        (click)="scrollToSection('certifications', $event); toggleMobileMenu()"
        >Certifications</a
      >
    </li>
    <li>
      <a
        href="#educations"
        (click)="scrollToSection('educations', $event); toggleMobileMenu()"
        >Educations</a
      >
    </li>
    <li>
      <a
        href="#awards"
        (click)="scrollToSection('awards', $event); toggleMobileMenu()"
        >Awards</a
      >
    </li>
  </ul>
</div>

<!-- Hero Section -->
<section class="hero" [class.dark-theme]="isDarkTheme" id="home">
  <div class="hero-content">
    <div class="hero-image">
      <div class="profile-card">
        <img
          src="assets/images/profile_photo.png"
          alt="Yugantar Badhan"
          class="profile-image"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'"
          onload="console.log('Profile image loaded successfully')"
          onError="console.error('Profile image failed to load')"
        />
        <div class="profile-image-placeholder" style="display: none">
          <i class="fas fa-user"></i>
        </div>
      </div>
    </div>
    <div class="hero-text">
      <h1>
        Hi, I'm <span class="highlight">Yugantar Badhan</span>, a<br /><span
          class="title"
          >Software Engineer</span
        >
      </h1>
      <p>
        I'm a
        <span class="highlight-text">passionate software engineer</span> with a
        focus on building
        <span class="highlight-text">scalable and efficient applications</span>.
        I have experience in
        <span class="highlight-text">full-stack development</span>, working with
        various technologies to deliver
        <span class="highlight-text">high-quality solutions</span>. I'm always
        eager to
        <span class="highlight-text">learn and take on new challenges</span>.
      </p>
      <button class="resume-btn" (click)="downloadResume()">
        <i class="fas fa-download"></i>
        Download My Resume
      </button>
    </div>
  </div>
</section>

<!-- Experience Section -->
<div id="experience" class="section-anchor">
  <app-experience *ngIf="shouldShowExperience()"></app-experience>
</div>

<!-- Projects Section -->
<div id="projects" class="section-anchor">
  <app-projects *ngIf="shouldShowProjects()"></app-projects>
</div>

<!-- Certifications Section - Placeholder -->
<section class="section" [class.dark-theme]="isDarkTheme" id="certifications">
  <div class="container">
    <h2>Certifications</h2>
    <p>Coming soon...</p>
  </div>
</section>

<!-- Education Section - Placeholder -->
<section class="section" [class.dark-theme]="isDarkTheme" id="educations">
  <div class="container">
    <h2>Education</h2>
    <p>Coming soon...</p>
  </div>
</section>

<!-- Awards Section - Placeholder -->
<section class="section" [class.dark-theme]="isDarkTheme" id="awards">
  <div class="container">
    <h2>Awards</h2>
    <p>Coming soon...</p>
  </div>
</section>
