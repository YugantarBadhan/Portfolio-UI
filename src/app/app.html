<!-- Author: Yugantar Badhan -->

<!-- Navigation Bar -->
<nav
  class="navbar"
  [class.dark-theme]="isDarkTheme"
  [class.scrolled]="isScrolled"
>
  <div class="logo">
    <i class="fas fa-briefcase"></i>
    Portfolio
  </div>
  <!-- Desktop Navigation -->
  <ul class="nav-links desktop-nav">
    <li><a href="#home" (click)="scrollToSection('home', $event)">Home</a></li>
    <li>
      <a href="#experience" (click)="scrollToSection('experience', $event)"
        >Experience</a
      >
    </li>
    <li>
      <a href="#projects" (click)="scrollToSection('projects', $event)"
        >Projects</a
      >
    </li>
    <li>
      <a href="#skills" (click)="scrollToSection('skills', $event)">Skills</a>
    </li>
    <li>
      <a
        href="#certifications"
        (click)="scrollToSection('certifications', $event)"
        >Certifications</a
      >
    </li>
    <li>
      <a href="#educations" (click)="scrollToSection('educations', $event)"
        >Educations</a
      >
    </li>
    <li>
      <a href="#awards" (click)="scrollToSection('awards', $event)">Awards</a>
    </li>
  </ul>

  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" (click)="toggleMobileMenu()">
    <i class="fas fa-bars" *ngIf="!isMobileMenuOpen"></i>
    <i class="fas fa-times" *ngIf="isMobileMenuOpen"></i>
  </button>

  <div class="nav-actions">
    <div class="social-buttons">
      <a
        href="https://linkedin.com/in/yugantar-badhan"
        target="_blank"
        class="social-btn linkedin"
        title="LinkedIn"
      >
        <i class="fab fa-linkedin-in"></i>
      </a>
      <a
        href="https://www.instagram.com/yash1314_/"
        target="_blank"
        class="social-btn instagram"
        title="Instagram"
      >
        <i class="fab fa-instagram"></i>
      </a>
      <a
        href="https://www.facebook.com/yash.badhan.96/"
        target="_blank"
        class="social-btn facebook"
        title="Facebook"
      >
        <i class="fab fa-facebook-f"></i>
      </a>
      <a
        href="https://wa.me/918796134779"
        target="_blank"
        class="social-btn whatsapp"
        title="WhatsApp"
      >
        <i class="fab fa-whatsapp"></i>
      </a>
    </div>

    <!-- Admin Dropdown -->
    <div class="admin-dropdown-container">
      <button
        class="admin-toggle"
        (click)="toggleAdminDropdown($event)"
        [class.active]="showAdminDropdown()"
        title="Admin Panel"
      >
        <img src="assets/images/admin.png" alt="Admin" class="admin-icon" />
      </button>

      <div
        class="admin-dropdown"
        [class.show]="showAdminDropdown()"
        [class.dark-theme]="isDarkTheme"
      >
        <div class="admin-dropdown-header">
          <span class="admin-status" *ngIf="isAdminAuthenticated()">
            <i class="fas fa-check-circle"></i> Authenticated
          </span>
          <span
            class="admin-status not-authenticated"
            *ngIf="!isAdminAuthenticated()"
          >
            <i class="fas fa-lock"></i> Not Authenticated
          </span>
        </div>

        <div class="admin-dropdown-content">
          <!-- Resume Upload Button - FIXED: Now requires authentication -->
          <button
            class="admin-section-btn"
            (click)="handleResumeUploadRequest($event)"
            title="Upload Resume"
          >
            <i class="fas fa-file-upload"></i>
            Upload Resume
          </button>

          <!-- Upload Profile Photo button in the admin dropdown content -->
          <button
            class="admin-section-btn"
            (click)="handleProfilePhotoUploadRequest($event)"
            title="Upload Profile Photo"
          >
            <i class="fas fa-camera"></i>
            Upload Profile Photo
          </button>

          <!-- Other Admin Sections -->
          <button
            *ngFor="let section of adminSections"
            class="admin-section-btn"
            [class.disabled]="!section.enabled"
            (click)="
              section.enabled ? selectAdminSection(section.id, $event) : null
            "
            [title]="
              section.enabled ? 'Manage ' + section.label : 'Coming Soon'
            "
          >
            <i
              class="fas"
              [class.fa-briefcase]="section.id === 'experience'"
              [class.fa-code]="section.id === 'projects'"
              [class.fa-code-branch]="section.id === 'skills'"
              [class.fa-certificate]="section.id === 'certifications'"
              [class.fa-graduation-cap]="section.id === 'educations'"
              [class.fa-trophy]="section.id === 'awards'"
            ></i>
            {{ section.label }}
            <span *ngIf="!section.enabled" class="coming-soon">Soon</span>
          </button>
        </div>

        <div class="admin-dropdown-footer" *ngIf="isAdminAuthenticated()">
          <button class="admin-logout-btn" (click)="logoutAdmin()">
            <i class="fas fa-sign-out-alt"></i> Logout
          </button>
        </div>
      </div>
    </div>

    <button
      class="theme-toggle"
      (click)="toggleTheme()"
      [title]="isDarkTheme ? 'Switch to Light Mode' : 'Switch to Dark Mode'"
    >
      <i
        class="fas"
        [class.fa-sun]="isDarkTheme"
        [class.fa-moon]="!isDarkTheme"
      ></i>
    </button>
  </div>
</nav>

<!-- Resume Upload Modal -->
<div *ngIf="showResumeUploadModal()" class="admin-modal-overlay">
  <div class="resume-upload-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Resume Management</h3>
      <button
        class="close-btn"
        (click)="closeResumeUploadModal()"
        type="button"
      >
        ×
      </button>
    </div>

    <div class="modal-body">
      <!-- Upload Section -->
      <div class="upload-section" *ngIf="!resumeUploaded()">
        <div
          class="upload-area"
          [class.drag-over]="isDragOver"
          (dragover)="onDragOver($event)"
          (dragleave)="onDragLeave($event)"
          (drop)="onDrop($event)"
        >
          <div class="upload-icon">
            <i class="fas fa-cloud-upload-alt"></i>
          </div>

          <h4>Upload Your Resume</h4>
          <p class="upload-text">
            Drag & drop your resume here or click to browse
          </p>
          <p class="file-types">Supported formats: PDF, DOC, DOCX (Max 10MB)</p>

          <input
            type="file"
            id="resumeFileInput"
            #fileInput
            (change)="onFileSelected($event)"
            accept=".pdf,.doc,.docx"
            style="display: none"
          />

          <button class="btn-browse" (click)="fileInput.click()">
            <i class="fas fa-folder-open"></i> Browse Files
          </button>
        </div>

        <!-- File Preview Before Upload -->
        <div class="file-preview" *ngIf="selectedFile">
          <div class="preview-header">
            <i class="fas fa-file-alt file-icon"></i>
            <div class="file-info">
              <p class="file-name">{{ selectedFile.name }}</p>
              <p class="file-size">{{ formatFileSize(selectedFile.size) }}</p>
            </div>
            <button class="btn-remove" (click)="removeSelectedFile()">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="upload-actions">
            <button class="btn-cancel" (click)="removeSelectedFile()">
              Cancel
            </button>
            <button
              class="btn-upload"
              (click)="uploadResume()"
              [disabled]="isUploading()"
            >
              <i class="fas fa-upload"></i>
              {{ isUploading() ? "Uploading..." : "Upload Resume" }}
            </button>
          </div>
        </div>

        <!-- Upload Progress -->
        <div class="upload-progress" *ngIf="isUploading()">
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="uploadProgress()"></div>
          </div>
          <p class="progress-text">Uploading... {{ uploadProgress() }}%</p>
        </div>

        <!-- Error Message -->
        <div class="error-message-box" *ngIf="uploadError()">
          <i class="fas fa-exclamation-circle"></i>
          <p>{{ uploadError() }}</p>
        </div>
      </div>

      <!-- SUCCESS AND ERROR MESSAGES - MOVED HERE ABOVE RESUMES LIST -->
      <div class="success-message-box" *ngIf="uploadSuccess()">
        <i class="fas fa-check-circle"></i>
        <p>{{ uploadSuccess() }}</p>
      </div>

      <!-- Error Message for general operations (separate from upload errors) -->
      <div
        class="error-message-box"
        *ngIf="uploadError() && !selectedFile && !isUploading()"
      >
        <i class="fas fa-exclamation-circle"></i>
        <p>{{ uploadError() }}</p>
      </div>

      <!-- Existing Resumes List -->
      <div class="resumes-list-section" *ngIf="existingResumes().length > 0">
        <h4 class="section-title">
          <i class="fas fa-history"></i> Uploaded Resumes
        </h4>

        <div class="resumes-list">
          <div
            *ngFor="let resume of existingResumes()"
            class="resume-item"
            [class.active]="resume.isActive"
          >
            <div class="resume-icon">
              <i
                class="fas fa-file-pdf"
                *ngIf="resume.fileFormat === 'PDF'"
              ></i>
              <i
                class="fas fa-file-word"
                *ngIf="resume.fileFormat !== 'PDF'"
              ></i>
            </div>

            <div class="resume-details">
              <p class="resume-name">{{ resume.originalFileName }}</p>
              <p class="resume-meta">
                {{ resume.fileSizeFormatted }} • Uploaded
                {{ formatUploadDate(resume.uploadedDate) }}
              </p>
              <span class="active-badge" *ngIf="resume.isActive">
                <i class="fas fa-check-circle"></i> Active
              </span>
            </div>

            <div class="resume-actions">
              <button
                class="btn-action"
                (click)="previewResume(resume.id)"
                title="Preview"
              >
                <i class="fas fa-eye"></i>
              </button>

              <button
                class="btn-action"
                *ngIf="!resume.isActive"
                (click)="setActiveResume(resume.id)"
                title="Set as Active"
              >
                <i class="fas fa-check"></i>
              </button>

              <button
                class="btn-action btn-delete"
                (click)="deleteResume(resume.id, resume.originalFileName)"
                title="Delete"
              >
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div
        class="empty-state"
        *ngIf="
          existingResumes().length === 0 &&
          !selectedFile &&
          !isUploading() &&
          !uploadSuccess() &&
          !uploadError()
        "
      >
        <i class="fas fa-file-upload"></i>
        <p>No resumes uploaded yet</p>
        <p class="empty-hint">Upload your first resume to get started</p>
      </div>
    </div>
  </div>
</div>

<!-- Profile Photo Upload Modal -->
<div *ngIf="showProfilePhotoUploadModal()" class="admin-modal-overlay">
  <div class="resume-upload-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Profile Photo Management</h3>
      <button
        class="close-btn"
        (click)="closeProfilePhotoUploadModal()"
        type="button"
      >
        ×
      </button>
    </div>

    <div class="modal-body">
      <!-- Upload Section -->
      <div class="upload-section" *ngIf="!profilePhotoUploaded()">
        <div
          class="upload-area"
          [class.drag-over]="isDragOverPhoto"
          (dragover)="onPhotoDragOver($event)"
          (dragleave)="onPhotoDragLeave($event)"
          (drop)="onPhotoDrop($event)"
        >
          <div class="upload-icon">
            <i class="fas fa-camera"></i>
          </div>

          <h4>Upload Profile Photo</h4>
          <p class="upload-text">
            Drag & drop your photo here or click to browse
          </p>
          <p class="file-types">Supported formats: JPG, PNG, WebP (Max 5MB)</p>
          <p class="file-types">Dimensions: 100x100 to 4000x4000 pixels</p>

          <input
            type="file"
            id="photoFileInput"
            #photoFileInput
            (change)="onPhotoFileSelected($event)"
            accept=".jpg,.jpeg,.png,.webp,image/jpeg,image/png,image/webp"
            style="display: none"
          />

          <button class="btn-browse" (click)="photoFileInput.click()">
            <i class="fas fa-folder-open"></i> Browse Images
          </button>
        </div>

        <!-- File Preview Before Upload -->
        <div class="file-preview" *ngIf="selectedPhotoFile">
          <div class="preview-header">
            <i class="fas fa-image file-icon"></i>
            <div class="file-info">
              <p class="file-name">{{ selectedPhotoFile.name }}</p>
              <p class="file-size">
                {{ formatFileSize(selectedPhotoFile.size) }}
              </p>
            </div>
            <button class="btn-remove" (click)="removeSelectedPhotoFile()">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="upload-actions">
            <button class="btn-cancel" (click)="removeSelectedPhotoFile()">
              Cancel
            </button>
            <button
              class="btn-upload"
              (click)="uploadProfilePhoto()"
              [disabled]="isPhotoUploading()"
            >
              <i class="fas fa-upload"></i>
              {{ isPhotoUploading() ? "Uploading..." : "Upload Photo" }}
            </button>
          </div>
        </div>

        <!-- Upload Progress -->
        <div class="upload-progress" *ngIf="isPhotoUploading()">
          <div class="progress-bar">
            <div
              class="progress-fill"
              [style.width.%]="photoUploadProgress()"
            ></div>
          </div>
          <p class="progress-text">Uploading... {{ photoUploadProgress() }}%</p>
        </div>

        <!-- Error Message -->
        <div class="error-message-box" *ngIf="photoUploadError()">
          <i class="fas fa-exclamation-circle"></i>
          <p>{{ photoUploadError() }}</p>
        </div>
      </div>

      <!-- SUCCESS AND ERROR MESSAGES -->
      <div class="success-message-box" *ngIf="photoUploadSuccess()">
        <i class="fas fa-check-circle"></i>
        <p>{{ photoUploadSuccess() }}</p>
      </div>

      <!-- Error Message for general operations -->
      <div
        class="error-message-box"
        *ngIf="photoUploadError() && !selectedPhotoFile && !isPhotoUploading()"
      >
        <i class="fas fa-exclamation-circle"></i>
        <p>{{ photoUploadError() }}</p>
      </div>

      <!-- Existing Profile Photos List -->
      <div
        class="resumes-list-section"
        *ngIf="existingProfilePhotos().length > 0"
      >
        <h4 class="section-title">
          <i class="fas fa-images"></i> Uploaded Profile Photos
        </h4>

        <div class="resumes-list">
          <div
            *ngFor="let photo of existingProfilePhotos()"
            class="resume-item"
            [class.active]="photo.isActive"
          >
            <div class="resume-icon">
              <img
                [src]="photo.imageUrl"
                alt="Profile photo thumbnail"
                style="
                  width: 40px;
                  height: 40px;
                  border-radius: 50%;
                  object-fit: cover;
                "
                onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'"
              />
              <i class="fas fa-image" style="display: none"></i>
            </div>

            <div class="resume-details">
              <p class="resume-name">{{ photo.originalFileName }}</p>
              <p class="resume-meta">
                {{ photo.fileSizeFormatted }} • {{ photo.imageWidth }}x{{
                  photo.imageHeight
                }}px • Uploaded {{ formatUploadDate(photo.uploadedDate) }}
              </p>
              <span class="active-badge" *ngIf="photo.isActive">
                <i class="fas fa-check-circle"></i> Active
              </span>
            </div>

            <div class="resume-actions">
              <button
                class="btn-action"
                (click)="previewProfilePhoto(photo.id)"
                title="Preview"
              >
                <i class="fas fa-eye"></i>
              </button>

              <button
                class="btn-action"
                *ngIf="!photo.isActive"
                (click)="setActiveProfilePhoto(photo.id)"
                title="Set as Active"
              >
                <i class="fas fa-check"></i>
              </button>

              <button
                class="btn-action btn-delete"
                (click)="deleteProfilePhoto(photo.id, photo.originalFileName)"
                title="Delete"
              >
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div
        class="empty-state"
        *ngIf="
          existingProfilePhotos().length === 0 &&
          !selectedPhotoFile &&
          !isPhotoUploading() &&
          !photoUploadSuccess() &&
          !photoUploadError()
        "
      >
        <i class="fas fa-camera"></i>
        <p>No profile photos uploaded yet</p>
        <p class="empty-hint">Upload your first profile photo to get started</p>
      </div>
    </div>
  </div>
</div>

<!-- Admin Token Modal - FIXED: No backdrop close -->
<div *ngIf="showAdminTokenModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>Admin Authentication</h3>
      <button class="close-btn" (click)="closeAdminTokenModal()">×</button>
    </div>

    <div class="admin-modal-content">
      <p>
        Enter admin token to manage <strong>{{ selectedAdminSection() }}</strong
        >:
      </p>
      <input
        type="password"
        class="admin-token-input"
        [(ngModel)]="adminToken"
        placeholder="Enter admin token"
        (keyup.enter)="submitAdminToken()"
        #tokenInput
      />
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeAdminTokenModal()">
        Cancel
      </button>
      <button
        class="btn-submit"
        (click)="submitAdminToken()"
        [disabled]="!adminToken.trim()"
      >
        Authenticate
      </button>
    </div>
  </div>
</div>

<!-- Admin Operations Modal - FIXED: No backdrop close -->
<div *ngIf="showAdminOperationsModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>{{ selectedAdminSection() | titlecase }} Management</h3>
      <button class="close-btn" (click)="closeAdminOperationsModal()">×</button>
    </div>

    <div class="admin-modal-content">
      <p>Choose an operation:</p>
      <div class="admin-operations-grid">
        <button
          *ngFor="let operation of adminOperations"
          class="admin-operation-btn"
          [class]="'operation-' + operation.id"
          (click)="selectOperation(operation.id)"
        >
          <i class="fas {{ operation.icon }}"></i>
          <span>{{ operation.label }}</span>
        </button>
      </div>
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeAdminOperationsModal()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Experience Selection Modal - FIXED: No backdrop close -->
<div *ngIf="showExperienceSelectionModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>Select Experience to {{ selectedOperation() | titlecase }}</h3>
      <button class="close-btn" (click)="closeExperienceSelectionModal()">
        ×
      </button>
    </div>

    <div class="admin-modal-content">
      <p *ngIf="experiences().length === 0">No experiences found.</p>
      <div *ngIf="experiences().length > 0" class="experience-selection-list">
        <button
          *ngFor="let exp of experiences()"
          class="experience-selection-item"
          [class.delete-mode]="selectedOperation() === 'delete'"
          (click)="selectExperience(exp.id)"
        >
          <div class="experience-info">
            <h4>{{ exp.companyName }}</h4>
            <p>{{ exp.role }}</p>
            <small
              >{{ exp.startDate | date : "MMM yyyy" }} -
              {{
                exp.current ? "Present" : (exp.endDate | date : "MMM yyyy")
              }}</small
            >
          </div>
          <i
            class="fas"
            [class.fa-edit]="selectedOperation() === 'update'"
            [class.fa-trash-alt]="selectedOperation() === 'delete'"
          ></i>
        </button>
      </div>
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeExperienceSelectionModal()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Project Selection Modal - FIXED: No backdrop close -->
<div *ngIf="showProjectSelectionModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>Select Project to {{ selectedOperation() | titlecase }}</h3>
      <button class="close-btn" (click)="closeProjectSelectionModal()">
        ×
      </button>
    </div>

    <div class="admin-modal-content">
      <p *ngIf="projects().length === 0">No projects found.</p>
      <div *ngIf="projects().length > 0" class="experience-selection-list">
        <button
          *ngFor="let project of projects()"
          class="experience-selection-item"
          [class.delete-mode]="selectedOperation() === 'delete'"
          (click)="selectProject(project.id)"
        >
          <div class="experience-info">
            <h4>{{ project.title }}</h4>
            <p>{{ project.techStack || "No tech stack specified" }}</p>
            <small>Project ID: {{ project.id }}</small>
          </div>
          <i
            class="fas"
            [class.fa-edit]="selectedOperation() === 'update'"
            [class.fa-trash-alt]="selectedOperation() === 'delete'"
          ></i>
        </button>
      </div>
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeProjectSelectionModal()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Skill Selection Modal -->
<div *ngIf="showSkillSelectionModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>Select Skill to {{ selectedOperation() | titlecase }}</h3>
      <button class="close-btn" (click)="closeSkillSelectionModal()">×</button>
    </div>

    <div class="admin-modal-content">
      <p *ngIf="skills().length === 0">No skills found.</p>
      <div *ngIf="skills().length > 0" class="experience-selection-list">
        <button
          *ngFor="let skill of skills()"
          class="experience-selection-item"
          [class.delete-mode]="selectedOperation() === 'delete'"
          (click)="selectSkill(skill.id)"
        >
          <div class="experience-info">
            <h4>{{ skill.name }}</h4>
            <p>{{ skill.category || "Uncategorized" }}</p>
            <small>Proficiency: {{ skill.proficiency }}/5</small>
          </div>
          <i
            class="fas"
            [class.fa-edit]="selectedOperation() === 'update'"
            [class.fa-trash-alt]="selectedOperation() === 'delete'"
          ></i>
        </button>
      </div>
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeSkillSelectionModal()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Certification Selection Modal -->
<div *ngIf="showCertificationSelectionModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>Select Certification to {{ selectedOperation() | titlecase }}</h3>
      <button class="close-btn" (click)="closeCertificationSelectionModal()">
        ×
      </button>
    </div>

    <div class="admin-modal-content">
      <p *ngIf="certifications().length === 0">No certifications found.</p>
      <div
        *ngIf="certifications().length > 0"
        class="experience-selection-list"
      >
        <button
          *ngFor="let cert of certifications()"
          class="experience-selection-item"
          [class.delete-mode]="selectedOperation() === 'delete'"
          (click)="selectCertification(cert.id)"
        >
          <div class="experience-info">
            <h4>{{ cert.title }}</h4>
            <p>{{ cert.monthYear }}</p>
            <small>ID: {{ cert.id }}</small>
          </div>
          <i
            class="fas"
            [class.fa-edit]="selectedOperation() === 'update'"
            [class.fa-trash-alt]="selectedOperation() === 'delete'"
          ></i>
        </button>
      </div>
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeCertificationSelectionModal()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Education Selection Modal -->
<div *ngIf="showEducationSelectionModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>Select Education to {{ selectedOperation() | titlecase }}</h3>
      <button class="close-btn" (click)="closeEducationSelectionModal()">
        ×
      </button>
    </div>

    <div class="admin-modal-content">
      <p *ngIf="educations().length === 0">No educations found.</p>
      <div *ngIf="educations().length > 0" class="experience-selection-list">
        <button
          *ngFor="let edu of educations()"
          class="experience-selection-item"
          [class.delete-mode]="selectedOperation() === 'delete'"
          (click)="selectEducation(edu.id)"
        >
          <div class="experience-info">
            <h4>{{ edu.degree }}</h4>
            <p>{{ edu.institute }}</p>
            <small
              >{{ edu.startDate }} -
              {{ edu.currentStudying ? "Present" : edu.endDate }}</small
            >
          </div>
          <i
            class="fas"
            [class.fa-edit]="selectedOperation() === 'update'"
            [class.fa-trash-alt]="selectedOperation() === 'delete'"
          ></i>
        </button>
      </div>
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeEducationSelectionModal()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Award Selection Modal - FIXED: No backdrop close -->
<div *ngIf="showAwardSelectionModal()" class="admin-modal-overlay">
  <div class="admin-modal-container" (click)="$event.stopPropagation()">
    <div class="admin-modal-header">
      <h3>Select Award to {{ selectedOperation() | titlecase }}</h3>
      <button class="close-btn" (click)="closeAwardSelectionModal()">×</button>
    </div>

    <div class="admin-modal-content">
      <p *ngIf="awards().length === 0">No awards found.</p>
      <div *ngIf="awards().length > 0" class="experience-selection-list">
        <button
          *ngFor="let award of awards()"
          class="experience-selection-item"
          [class.delete-mode]="selectedOperation() === 'delete'"
          (click)="selectAward(award.id)"
        >
          <div class="experience-info">
            <h4>{{ award.awardName }}</h4>
            <p>{{ award.awardCompanyName }}</p>
            <small
              >{{ award.awardYear || "Year not specified" }} • ID:
              {{ award.id }}</small
            >
          </div>
          <i
            class="fas"
            [class.fa-edit]="selectedOperation() === 'update'"
            [class.fa-trash-alt]="selectedOperation() === 'delete'"
          ></i>
        </button>
      </div>
    </div>

    <div class="admin-modal-actions">
      <button class="btn-cancel" (click)="closeAwardSelectionModal()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Mobile Navigation Menu -->
<div
  class="mobile-menu"
  [class.open]="isMobileMenuOpen"
  [class.dark-theme]="isDarkTheme"
>
  <ul class="mobile-nav-links">
    <li>
      <a
        href="#home"
        (click)="scrollToSection('home', $event); toggleMobileMenu()"
        >Home</a
      >
    </li>
    <li>
      <a
        href="#experience"
        (click)="scrollToSection('experience', $event); toggleMobileMenu()"
        >Experience</a
      >
    </li>
    <li>
      <a
        href="#projects"
        (click)="scrollToSection('projects', $event); toggleMobileMenu()"
        >Projects</a
      >
    </li>
    <li>
      <a
        href="#skills"
        (click)="scrollToSection('skills', $event); toggleMobileMenu()"
        >Skills</a
      >
    </li>
    <li>
      <a
        href="#certifications"
        (click)="scrollToSection('certifications', $event); toggleMobileMenu()"
        >Certifications</a
      >
    </li>
    <li>
      <a
        href="#educations"
        (click)="scrollToSection('educations', $event); toggleMobileMenu()"
        >Educations</a
      >
    </li>
    <li>
      <a
        href="#awards"
        (click)="scrollToSection('awards', $event); toggleMobileMenu()"
        >Awards</a
      >
    </li>
  </ul>
</div>

<!-- Hero Section -->
<section class="hero" [class.dark-theme]="isDarkTheme" id="home">
  <div class="hero-content">
    <!-- Updated hero-image section with debug info -->
    <div class="hero-image">
      <div class="profile-card">
        <!-- Debug info (remove in production) -->
        <div
          *ngIf="getActiveProfilePhotoUrl()"
          style="font-size: 10px; color: #666; margin-bottom: 5px"
        >
          <!-- Debug: {{ getActiveProfilePhotoUrl() }} -->
        </div>

        <!-- Dynamic Profile Photo -->
        <img
          *ngIf="getActiveProfilePhotoUrl()"
          [src]="getActiveProfilePhotoUrl()"
          alt="Yugantar Badhan"
          class="profile-image"
          (error)="onProfileImageError($event)"
          (load)="onProfileImageLoad($event)"
          style="max-width: 100%; height: auto"
        />

        <!-- Placeholder if no image available -->
        <div
          *ngIf="!getActiveProfilePhotoUrl()"
          class="profile-image-placeholder"
        >
          <i class="fas fa-user"></i>
          <div style="font-size: 10px; margin-top: 5px">No photo available</div>
        </div>
      </div>
    </div>
    <div class="hero-text">
      <h1>
        Hi, I'm <span class="highlight">Yugantar Badhan</span>, a<br /><span
          class="title"
          >Software Engineer</span
        >
      </h1>
      <p>
        I'm a
        <span class="highlight-text">passionate software engineer</span> with a
        focus on building
        <span class="highlight-text">scalable and efficient applications</span>.
        I have experience in
        <span class="highlight-text">full-stack development</span>, working with
        various technologies to deliver
        <span class="highlight-text">high-quality solutions</span>. I'm always
        eager to
        <span class="highlight-text">learn and take on new challenges</span>.
      </p>
      <button class="resume-btn" (click)="downloadResume()">
        <i class="fas fa-download"></i>
        Download My Resume
      </button>
    </div>
  </div>
</section>

<!-- Experience Section -->
<div id="experience" class="section-anchor">
  <app-experience *ngIf="shouldShowExperience()"></app-experience>
</div>

<!-- Projects Section -->
<div id="projects" class="section-anchor">
  <app-projects *ngIf="shouldShowProjects()"></app-projects>
</div>

<!-- Skills Section -->
<div id="skills" class="section-anchor">
  <app-skills *ngIf="shouldShowSkills()"></app-skills>
</div>

<!-- Certifications Section -->
<div id="certifications" class="section-anchor">
  <app-certifications *ngIf="shouldShowCertifications()"></app-certifications>
</div>

<!-- Education Section -->
<div id="educations" class="section-anchor">
  <app-educations *ngIf="shouldShowEducations()"></app-educations>
</div>

<!-- Awards Section -->
<div id="awards" class="section-anchor">
  <app-awards *ngIf="shouldShowAwards()"></app-awards>
</div>

<!-- Footer Section -->
<footer class="footer" [class.dark-theme]="isDarkTheme">
  <div class="footer-content">
    <p class="footer-text">
      © 2025 Portfolio - Yugantar Badhan. All rights reserved. | Powered By
      <strong class="powered-by">Yugantar Badhan</strong>
    </p>
  </div>
</footer>
